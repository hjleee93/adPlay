window.__require=function t(e,o,n){function i(a,s){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var p="function"==typeof __require&&__require;if(!s&&p)return p(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var l=o[a]={exports:{}};e[a][0].call(l.exports,function(t){return i(e[a][1][t]||t)},l,l.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({Background:[function(t,e,o){"use strict";cc._RF.push(e,"af388/AdSpGsYTieb+vi853","Background");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../fw/PoolManager"),a=t("../fw/Util"),s=cc._decorator,c=s.ccclass,p=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sharkGenTime=0,e.shark2GenTime=0,e.cloudGenTime=0,e}return n(e,t),e.prototype.start=function(){var t=cc.find("Canvas").getContentSize().width,e=r.default.get("cloud");e.node.active=!0,e.node.x=a.default.Math.randomInt(-t/2,t/2);var o=r.default.get("cloud");o.node.active=!0,o.node.x=a.default.Math.randomInt(-t/2,t/2)},e.prototype.update=function(t){(this.cloudGenTime-=t,this.cloudGenTime<=0)&&(this.cloudGenTime=a.default.Math.randomFloat(20,50),r.default.get("cloud").node.active=!0)},e=i([c],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../fw/PoolManager":"PoolManager","../fw/Util":"Util"}],BlockContainer:[function(t,e,o){"use strict";cc._RF.push(e,"b6aecO20hRAPq7dvCESib07","BlockContainer");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r,a=t("../data/const"),s=t("../data/store"),c=t("../manager/GameManager"),p=cc._decorator,l=p.ccclass,u=p.property;(function(t){t[t.none=0]="none",t[t.rain=1]="rain",t[t.noMoreMatch=2]="noMoreMatch",t[t.noMoreMatchReset=3]="noMoreMatchReset"})(r||(r={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.animation=r.none,e.time=0,e.maxTime=0,e.cells=null,e.isDrag=!1,e.dragStartPos=new cc.Vec2,e.dragBlock=null,e}return n(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onDragStart.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,this.onDragEnd.bind(this)),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onDragEnd.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onDragMove.bind(this))},e.prototype.start=function(){c.default.Instance.node.on("startGame",this.onStartGame.bind(this))},e.prototype.setCells=function(t){this.cells=t},e.prototype.onStartGame=function(){this.node.angle=0,this.node.scale=1,this.animation=r.none,this.mask.enabled=!0},e.prototype.update=function(t){if(this.animation!==r.none){this.time+=t;var e=this.time/this.maxTime;switch(e>=1&&(e=1),this.animation){case r.rain:this.node.y=504-504*e;break;case r.noMoreMatch:var o=cc.easing.cubicIn(e);this.node.angle=180*o,this.node.scale=Math.abs(Math.cos(o*Math.PI/2));break;case r.noMoreMatchReset:o=cc.easing.cubicOut(e);this.node.angle=180+180*o,this.node.scale=Math.abs(Math.cos((1-o)*Math.PI/2))}e>=1&&this.endAnimation()}},e.prototype.startRainAnimation=function(){this.time=0,this.maxTime=1,this.animation=r.rain,c.default.Instance.actionCountUp()},e.prototype.startNoMoreMatchAnimation=function(){this.time=0,this.maxTime=1,this.animation=r.noMoreMatch,this.mask.enabled=!1,c.default.Instance.actionCountUp()},e.prototype.startNoMoreMatchResetAnimation=function(){this.time=0,this.maxTime=1,this.animation=r.noMoreMatchReset,c.default.Instance.actionCountUp()},e.prototype.endAnimation=function(){switch(this.animation){case r.rain:case r.noMoreMatch:break;case r.noMoreMatchReset:this.mask.enabled=!0}this.animation=r.none,c.default.Instance.actionCountDown()},e.prototype.onDragStart=function(t){if(s.default.isPlay&&s.default.gameState===a.GameState.wait){var e=t.getLocation(),o=this.node.convertToNodeSpaceAR(e),n=Math.floor((o.x- -252)/56),i=Math.floor((252-o.y)/56)*a.CountX+n;this.dragBlock=this.cells[i].block,c.default.Instance.setSelectBlock(this.dragBlock.node),this.isDrag=!0,this.dragStartPos.set(e)}},e.prototype.onDragEnd=function(){this.isDrag=!1,c.default.Instance.setSelectBlock(null)},e.prototype.onDragMove=function(t){if(s.default.isPlay&&this.isDrag&&s.default.gameState===a.GameState.wait){var e=t.getLocation(),o=e.x-this.dragStartPos.x,n=e.y-this.dragStartPos.y;o*o>n*n?o>0?this.dragBlock.swapSide(o,a.SideType.right)&&this.onDragEnd():this.dragBlock.swapSide(o,a.SideType.left)&&this.onDragEnd():n>0?this.dragBlock.swapSide(n,a.SideType.up)&&this.onDragEnd():this.dragBlock.swapSide(n,a.SideType.down)&&this.onDragEnd()}},i([u(cc.Mask)],e.prototype,"mask",void 0),e=i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../data/const":"const","../data/store":"store","../manager/GameManager":"GameManager"}],BlockManager:[function(t,e,o){"use strict";cc._RF.push(e,"207d6Z5Y29O+o6aIQwpHpt7","BlockManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../fw/Pool2"),a=t("../fw/PrefabManager"),s=t("../gameObject/Block"),c=t("../logic/generator"),p=t("../data/const"),l=t("../logic/cell"),u=t("../logic/dropCtrl"),h=t("../data/store"),f=t("../logic/swap"),d=t("../logic/match"),y=t("../gameObject/BlockContainer"),m=cc._decorator,_=m.ccclass,g=m.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockContainer=null,e.pool=null,e.cells=[],e.boardData={start:{x:-224,y:224},cellSize:{w:56,h:56}},e.generator=new c.default,e.swap=new f.default,e.dropCtrl=new u.default,e.match=null,e}return n(e,t),e.prototype.onLoad=function(){var t=a.default.Instance.getPrefab("block");this.pool=new r.default(t,this.blockContainer.node,function(t){return t.getComponent(s.default)});for(var e=0;e<p.CountX*p.CountY;e++){(i=new l.default).index=e,i.indexX=e%p.CountX,i.indexY=Math.floor(e/p.CountX),i.node.x=this.boardData.start.x+i.indexX*this.boardData.cellSize.w,i.node.y=this.boardData.start.y-i.indexY*this.boardData.cellSize.h,this.cells[e]=i}for(var o=0;o<p.CountY;o++)for(var n=0;n<p.CountX;n++){var i;(i=this.getCell(n,o)).setSide(this.getCell(n,o-1),this.getCell(n,o+1),this.getCell(n-1,o),this.getCell(n+1,o))}this.match=new d.default(this.boardData,this.pool,this.cells),this.blockContainer.setCells(this.cells)},e.prototype.clear=function(){this.swap.claer(),this.dropCtrl.clear(),this.pool.clear();for(var t=0;t<this.cells.length;t++)this.cells[t].block=null},e.prototype.getCell=function(t,e){var o=null;return t>=0&&t<p.CountX&&e>=0&&e<p.CountY&&(o=this.cells[e*p.CountX+t]),o},e.prototype.start=function(){},e.prototype.initBlocks=function(t){for(;!this.genBlock(t);)0},e.prototype.genBlock=function(t){for(var e=[],o=0;o<p.CountY;o++)for(var n=0;n<p.CountX;n++){var i=this.getCell(n,o),r=i.block,a=p.ItemType.none;r?a=r.item:r=this.pool.get(),r.init(i),i.setBlock(r);for(var s=!1,c=0;c<6;c++){var l=this.generator.getType(),u=i.side[p.SideType.left],h=i.side[p.SideType.up];if(e[l]=e[l]||0,e[l]++,u&&u.block&&l===u.block.type){var f=u.side[p.SideType.left];if(f&&f.block&&l===f.block.type)continue}if(h&&h.block&&l===h.block.type){var d=h.side[p.SideType.up];if(d&&d.block&&l===d.block.type)continue}r.setBlockType(l),t&&a!==p.ItemType.none&&r.setItemType(a),s=!0;break}if(!s)return!1}for(c=1;c<e.length;c++)e[c];return!0},e.prototype.dropBlock=function(){for(var t=!1,e=0;e<p.CountX;e++)for(var o=p.CountY-1;o>=0;o--){var n=this.getCell(e,o);if(null===n.block){var i=this.getCell(e,o-1);if(i){if(null!==i.block){t=!0;var r=i.block;i.setBlock(null),this.dropCtrl.startDrop(r,i.node.x,i.node.y,n,h.default.config.DropSpeed),n.setBlock(r),r.cell=n}}else{t=!0;r=this.pool.get();n.side[p.SideType.down]&&n.side[p.SideType.down].block?r.setBlockType(this.generator.getType(n.side[p.SideType.down].block.type)):r.setBlockType(this.generator.getType()),r.init(n),n.setBlock(r),this.dropCtrl.startDrop(r,n.node.x,n.node.y+this.boardData.cellSize.h,n,h.default.config.DropSpeed)}}}return t},e.prototype.swapBlock=function(t,e,o,n){void 0===n&&(n=null),this.swap.start(t,e,o,n)},e.prototype.swapReset=function(){this.swap.startReset()},e.prototype.startMatch=function(){return this.match.match()},e.prototype.startNoMoreMatchAnimation=function(){this.blockContainer.startNoMoreMatchAnimation()},e.prototype.startNoMoreMatchResetAnimation=function(){this.blockContainer.startNoMoreMatchResetAnimation()},e.prototype.startRainAnimation=function(){this.blockContainer.startRainAnimation()},e.prototype.endRain=function(){for(var t=0;t<this.cells.length;t++)this.cells[t].block&&this.cells[t].block.finishDrop()},e.prototype.noMatch=function(){return this.match.noMatch()},e.prototype.breakBlocks=function(){this.match.breakBlocks()},e.prototype.breakBlock=function(t){this.match.breakBlock(t)},e.prototype.breakBlock2=function(t,e){this.match.breakBlock2(t,e)},e.prototype.update=function(t){this.swap.update(t),this.dropCtrl.update(t)},i([g(y.default)],e.prototype,"blockContainer",void 0),e=i([_],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../data/const":"const","../data/store":"store","../fw/Pool2":"Pool2","../fw/PrefabManager":"PrefabManager","../gameObject/Block":"Block","../gameObject/BlockContainer":"BlockContainer","../logic/cell":"cell","../logic/dropCtrl":"dropCtrl","../logic/generator":"generator","../logic/match":"match","../logic/swap":"swap"}],Block:[function(t,e,o){"use strict";cc._RF.push(e,"794d0+QQdRE3KtHAPR0sPuc","Block");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../data/const"),a=t("../data/store"),s=t("../manager/GameManager"),c=t("../fw/PoolManager"),p=cc._decorator,l=p.ccclass,u=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spines=[],e.itemSpine=null,e.type=r.BlockType.none,e.item=r.ItemType.none,e.cell=null,e.actionTurn=0,e.breakDelay=0,e.isBreak=!1,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onEnable=function(){},e.prototype.update=function(t){this.isBreak&&(this.breakDelay-=t,this.breakDelay<=0&&(c.default.get("effectDropFish").startEffect(this.type,this.node.x,this.node.y),this.node.active=!1,s.default.Instance.actionCountDown()))},e.prototype.init=function(t){this.isBreak=!1,this.cell=t,this.item=r.ItemType.none,this.itemSpine.node.active=!1,this.node.angle=0,t&&(this.node.x=t.node.x,this.node.y=t.node.y)},e.prototype.setBlockType=function(t){this.type=t,this.item=r.ItemType.none;for(var e=0;e<this.spines.length;e++){var o=this.spines[e];o&&(o.node.active=this.type===e)}this.spines[this.type].setAnimation(0,"idle_01",!0)},e.prototype.setItemType=function(t){this.item=t;var e=this.spines[this.type];switch(e&&(e.setAnimation(0,"s_match",!1),e.addAnimation(0,"idle_01",!0)),this.item){case r.ItemType.none:this.itemSpine.node.active=!1;break;case r.ItemType.horizon:case r.ItemType.vertical:case r.ItemType.square:case r.ItemType.color:this.itemSpine.node.active=!0,this.itemSpine.setAnimation(0,"in",!1),this.itemSpine.addAnimation(0,"idle",!0)}},e.prototype.startDrop=function(){var t=this.spines[this.type];t&&t.setAnimation(0,"to_down",!0)},e.prototype.finishDrop=function(){var t=this.spines[this.type];t&&(t.setAnimation(0,"lending",!1),t.addAnimation(0,"idle_01",!0))},e.prototype.startBreak=function(){s.default.Instance.actionCountUp(),this.isBreak=!0,this.breakDelay=a.default.config.EffectTime;var t=this.spines[this.type];t&&t.setAnimation(0,"match",!1)},e.prototype.swapSide=function(t,e){return!(null===this.cell.side[e]||Math.abs(t)<a.default.config.MovePixel)&&(s.default.Instance.swapBlock(this,this.cell.side[e].block),!0)},i([u(sp.Skeleton)],e.prototype,"spines",void 0),i([u(sp.Skeleton)],e.prototype,"itemSpine",void 0),e=i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../data/const":"const","../data/store":"store","../fw/PoolManager":"PoolManager","../manager/GameManager":"GameManager"}],1:[function(t,e,o){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,o,n,r,c,p;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(s(o=this._events[t]))return!1;if(i(o))switch(arguments.length){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),o.apply(this,r)}else if(a(o))for(r=Array.prototype.slice.call(arguments,1),n=(p=o.slice()).length,c=0;c<n;c++)p[c].apply(this,r);return!0},n.prototype.addListener=function(t,e){var o;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var o=!1;function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var o,n,r,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=(o=this._events[t]).length,n=-1,o===e||i(o.listener)&&o.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(o)){for(s=r;s-- >0;)if(o[s]===e||o[s].listener&&o[s].listener===e){n=s;break}if(n<0)return this;1===o.length?(o.length=0,delete this._events[t]):o.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,o;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(o=this._events[t]))this.removeListener(t,o);else if(o)for(;o.length;)this.removeListener(t,o[o.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},{}],Cloud:[function(t,e,o){"use strict";cc._RF.push(e,"7f4d2FbhgRKZ7zNkOBCiZdT","Cloud");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../fw/Util"),a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=10,e.gameWidth=0,e}return n(e,t),e.prototype.start=function(){},e.prototype.onEnable=function(){this.gameWidth=cc.find("Canvas").getContentSize().width,this.node.x=this.gameWidth+100,this.node.y=r.default.Math.randomInt(100,420)},e.prototype.update=function(t){this.node.x-=this.speed*t,this.node.x<=this.gameWidth/2-100&&(this.node.active=!1)},e=i([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{"../fw/Util":"Util"}],Combo:[function(t,e,o){"use strict";cc._RF.push(e,"0f19dXF67ZBhbExI9gYBOT+","Combo");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../data/const"),a=t("../data/store"),s=t("../manager/GameManager"),c=t("./MainShark"),p=cc._decorator,l=p.ccclass,u=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.board_on=null,e.comboUiNode=null,e.comboUiLabel=null,e.mainShark=null,e.time=0,e}return n(e,t),e.prototype.start=function(){s.default.Instance.node.on("startGame",this.onStartGame.bind(this)),s.default.Instance.node.on("addCombo",this.addCombo.bind(this))},e.prototype.onStartGame=function(){this.reset()},e.prototype.reset=function(){this.board_on.active=!1,a.default.combo=0,this.time=0,this.mainShark.endCombo(),this.comboUiNode.active=!1},e.prototype.addCombo=function(){this.board_on.active=!0,this.board_on.opacity=s.default.Instance.getCombo()/a.default.config.MaxCombo*255,this.comboUiNode.active=!0,this.comboUiLabel.string=s.default.Instance.getCombo().toString(),this.time=0,this.mainShark.startCombo()},e.prototype.update=function(t){switch(a.default.gameState){case r.GameState.wait:case r.GameState.swap:case r.GameState.swapReset:this.time+=t,this.time>=a.default.config.ComboTime&&this.reset();break;case r.GameState.break:case r.GameState.drop:}},i([u(cc.Node)],e.prototype,"board_on",void 0),i([u(cc.Node)],e.prototype,"comboUiNode",void 0),i([u(cc.Label)],e.prototype,"comboUiLabel",void 0),i([u(c.default)],e.prototype,"mainShark",void 0),e=i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../data/const":"const","../data/store":"store","../manager/GameManager":"GameManager","./MainShark":"MainShark"}],EffectDropFish:[function(t,e,o){"use strict";cc._RF.push(e,"575ab/kZ9BIzYotN3Q6T9je","EffectDropFish");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../data/const"),a=t("../data/store"),s=t("../manager/GameManager"),c=cc._decorator,p=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprites=[],e.spine=null,e.speed=0,e.isDrop=!1,e.type=r.BlockType.none,e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.spine.setCompleteListener(function(){t.node.active=!1})},e.prototype.startEffect=function(t,e,o){this.node.active=!0,this.node.setPosition(e,o),this.speed=a.default.config.EatFishDropSpeed,this.sprites[t].node.active=!0,this.spine.node.active=!1,this.isDrop=!1,this.type=t},e.prototype.update=function(t){this.isDrop||(this.node.y-=this.speed*t,this.node.y<=-400&&this.startDropSpine())},e.prototype.startDropSpine=function(){this.isDrop=!0;for(var t=1;t<this.sprites.length;t++)this.sprites[t].node.active=!1;this.spine.node.active=!0,this.spine.setAnimation(0,"wave",!1),s.default.Instance.addFish(this.type)},i([l(cc.Sprite)],e.prototype,"sprites",void 0),i([l(sp.Skeleton)],e.prototype,"spine",void 0),e=i([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../data/const":"const","../data/store":"store","../manager/GameManager":"GameManager"}],EffectEatFish:[function(t,e,o){"use strict";cc._RF.push(e,"9e423mjb7ZHnaWjub/4Dr0E","EffectEatFish");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../data/store"),a=t("../fw/Util"),s=cc._decorator,c=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprites=[],e.speed=0,e}return n(e,t),e.prototype.startEffect=function(t){for(var e=1;e<this.sprites.length;e++)this.sprites[e].node.active=t===e;this.node.setPosition(a.default.Math.randomInt(-215,-210),510),this.speed=r.default.config.EatFishDropSpeed},e.prototype.update=function(t){this.node.y-=this.speed*t,this.node.y<=338&&(this.node.active=!1)},i([p(cc.Sprite)],e.prototype,"sprites",void 0),e=i([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../data/store":"store","../fw/Util":"Util"}],EffectScore:[function(t,e,o){"use strict";cc._RF.push(e,"91cbakyKwtHaqCtBDXZZUi7","EffectScore");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../fw/Util"),a=t("../data/store"),s=cc._decorator,c=s.ccclass,p=s.property,l=[{time:0,color:1,curve:"stepped"},{time:.6667,color:1},{time:1,color:0}],u=[{time:0,x:.1,y:.1},{time:.0667,x:1.8,y:1.8},{time:.1667,x:1.8,y:1.8},{time:.2333,x:.9,y:.9},{time:.2667,x:1,y:1}],h=[{time:0,x:0,y:0},{time:.6667,x:0,y:0},{time:1,x:0,y:56}],f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.score=null,e.combo=null,e.root=null,e.keys={alpha:0,scale:0,translate:0},e.time=0,e.maxTime=0,e}return n(e,t),e.prototype.startEffect=function(t,e,o,n){this.node.active=!0,this.node.setPosition(t,e),this.score.string=o.toString(),this.combo.string=n.toString(),this.time=0,this.maxTime=a.default.config.ScoreEffectTime,this.node.opacity=255,this.node.scale=1,this.root.y=0,this.keys.alpha=0,this.keys.scale=0,this.keys.translate=0},e.prototype.update=function(t){var e=i=l[this.keys.alpha].time,o=a=l[this.keys.alpha].color;this.keys.alpha<l.length-1&&(e=l[this.keys.alpha+1].time,o=l[this.keys.alpha+1].color),this.time>=e&&this.keys.alpha<l.length-1&&(this.keys.alpha++,e=i=l[this.keys.alpha].time,o=a=l[this.keys.alpha].color,this.keys.alpha<l.length-1&&(e=l[this.keys.alpha+1].time,o=l[this.keys.alpha+1].color)),0===(s=e-i)&&(s=1),c=(c=(this.time-i)/s)>1?1:c,this.node.opacity=255*r.default.Math.lerp(a,o,c);e=i=u[this.keys.scale].time,o=a=u[this.keys.scale].x;this.keys.scale<u.length-1&&(e=u[this.keys.scale+1].time,o=u[this.keys.scale+1].x),this.time>=e&&this.keys.scale<u.length-1&&(this.keys.scale++,e=i=u[this.keys.scale].time,o=a=u[this.keys.scale].x,this.keys.scale<u.length-1&&(e=u[this.keys.scale+1].time,o=u[this.keys.scale+1].x)),0===(s=e-i)&&(s=1),c=(c=(this.time-i)/s)>1?1:c,c=cc.easing.cubicInOut(c);var n=r.default.Math.lerp(a,o,c);this.node.scale=n;var i,a,s,c;e=i=h[this.keys.translate].time,o=a=h[this.keys.translate].y;this.keys.translate<h.length-1&&(e=h[this.keys.translate+1].time,o=h[this.keys.translate+1].y),this.time>=e&&this.keys.translate<h.length-1&&(this.keys.translate++,e=i=h[this.keys.translate].time,o=a=h[this.keys.translate].y,this.keys.translate<h.length-1&&(e=h[this.keys.translate+1].time,o=h[this.keys.translate+1].y)),0===(s=e-i)&&(s=1),c=(c=(this.time-i)/s)>1?1:c,this.root.setPosition(0,r.default.Math.lerp(a,o,c)),this.time+=t/this.maxTime,this.time>=1&&(this.node.active=!1)},i([p(cc.Label)],e.prototype,"score",void 0),i([p(cc.Label)],e.prototype,"combo",void 0),i([p(cc.Node)],e.prototype,"root",void 0),e=i([c],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../data/store":"store","../fw/Util":"Util"}],EffectTime:[function(t,e,o){"use strict";cc._RF.push(e,"a3234LA9bZK/6QoxTH704Ua","EffectTime");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeLabel=null,e.maxTime=0,e.time=0,e}return n(e,t),e.prototype.startEffect=function(t,e,o,n){this.node.active=!0,this.node.setPosition(t,e),this.timeLabel.string="+ "+o,this.maxTime=n,this.time=0},e.prototype.update=function(t){if(this.time+=t,this.time>=this.maxTime)this.node.active=!1;else{var e=this.time/this.maxTime;this.node.opacity=255*Math.abs(Math.sin(8*e))}},i([s(cc.Label)],e.prototype,"timeLabel",void 0),e=i([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EventManager:[function(t,e,o){"use strict";cc._RF.push(e,"0ac66QaHpBI3rEWsLq5ooPy","EventManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},r=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,i++)n[i]=r[a];return n};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o._instance||cc.log("EventManager\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c"),o._instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o._instance=this},e.prototype.onDestroy=function(){o._instance=null},e.prototype.on=function(t,e,o){this.node.on(t,e,o)},e.prototype.off=function(t,e,o){this.node.off(t,e,o)},e.prototype.emit=function(t){for(var e,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];(e=this.node).emit.apply(e,r([t],o))},e._instance=null,e=o=i([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],Following:[function(t,e,o){"use strict";cc._RF.push(e,"766ecJf7Q1FsbSCtpcduU0C","Following");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Util"),a=cc._decorator,s=a.ccclass,c=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.offset=new cc.Vec2,e.scale=1,e.deltaRate=.24,e.bounds=new cc.Rect(0,0,0,0),e}return n(e,t),e.prototype.start=function(){this.bounds.xMin=-1/0,this.bounds.xMax=1/0,this.bounds.yMin=-1/0,this.bounds.yMax=1/0},e.prototype.update=function(t){this.target&&this.setPosition(this.target.x*this.scale-this.offset.x,this.target.y*this.scale-this.offset.y,t)},e.prototype.setPosition=function(t,e,o){var n=o/this.deltaRate;n>1&&(n=1);var i=r.default.Math.lerp(this.node.x,t,n),a=r.default.Math.lerp(this.node.y,e,n);i<this.bounds.xMin?i=this.bounds.xMin:i>this.bounds.xMax&&(i=this.bounds.xMax),a<this.bounds.yMin?a=this.bounds.yMin:a>this.bounds.yMax&&(a=this.bounds.yMax),this.node.setPosition(i,a)},i([c(cc.Node)],e.prototype,"target",void 0),i([c(cc.Vec2)],e.prototype,"offset",void 0),e=i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Util":"Util"}],GameManager:[function(t,e,o){"use strict";cc._RF.push(e,"09f8fYes9RHm5kXj9UeP06j","GameManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../logic/actionCount"),a=t("./BlockManager"),s=t("../data/store"),c=t("../data/const"),p=t("../fw/SoundManager"),l=cc._decorator,u=l.ccclass,h=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockManager=null,e.selectBlock=null,e.actionCount=new r.default,e}var o;return n(e,t),o=e,e.prototype.onLoad=function(){o.Instance=this,this.actionCount.on("swap",this.swapMatch.bind(this)),this.actionCount.on("swapReset",this.wait.bind(this)),this.actionCount.on("break",this.drop.bind(this)),this.actionCount.on("drop",this.drop.bind(this)),this.actionCount.on("noMoreMatch",this.noMatchReset.bind(this)),this.actionCount.on("noMoreMatchReset",this.wait.bind(this)),this.actionCount.on("startRain",this.endRain.bind(this))},e.prototype.startGame=function(){this.actionCount.clear(),this.blockManager.clear(),this.setSelectBlock(null),s.default.claer(),this.setTime(s.default.config.MaxTime),this.node.emit("startGame"),s.default.isPlay=!0,this.initBlocks(!0),this.startRain(),this.node.emit("updateScore",s.default.score)},e.prototype.gameOver=function(){this.setSelectBlock(null),s.default.isPlay=!1,this.node.emit("gameOver",s.default.score)},e.prototype.setTime=function(t){s.default.time=t,this.node.emit("setTime",t)},e.prototype.addTime=function(t){s.default.time+=t,s.default.time>s.default.config.MaxTime&&(s.default.time=s.default.config.MaxTime),this.node.emit("addTime",t)},e.prototype.addCombo=function(){return s.default.combo++,this.node.emit("addCombo"),this.getCombo()},e.prototype.getCombo=function(){return s.default.combo<=s.default.config.MaxCombo?s.default.combo:s.default.config.MaxCombo},e.prototype.addScore=function(t){s.default.score+=t,this.node.emit("updateScore",s.default.score)},e.prototype.addFish=function(t){this.node.emit("addFish",t)},e.prototype.actionCountUp=function(){this.actionCount.countUp()},e.prototype.actionCountDown=function(){this.actionCount.countDown()},e.prototype.getActionTurn=function(){return this.actionCount.getActionTurn()},e.prototype.initBlocks=function(t){this.blockManager.initBlocks(t)},e.prototype.swapMatch=function(){this.blockManager.startMatch()?this.breakBlocks():this.swapReset()},e.prototype.wait=function(){s.default.gameState=c.GameState.wait},e.prototype.drop=function(){this.blockManager.dropBlock()?s.default.gameState=c.GameState.drop:this.dropMatch()},e.prototype.breakBlocks=function(){s.default.gameState=c.GameState.break,this.blockManager.breakBlocks()},e.prototype.breakBlock=function(t,e){this.blockManager.breakBlock2(t,e)},e.prototype.dropMatch=function(){this.blockManager.startMatch()?this.breakBlocks():this.noMatch()||(s.default.gameState=c.GameState.wait)},e.prototype.noMatch=function(){return!!this.blockManager.noMatch()&&(s.default.gameState=c.GameState.noMoreMatch,this.blockManager.startNoMoreMatchAnimation(),!0)},e.prototype.noMatchReset=function(){this.initBlocks(!0),s.default.gameState=c.GameState.noMoreMatchReset,this.blockManager.startNoMoreMatchResetAnimation()},e.prototype.swapReset=function(){p.default.Instance.playSound("block_remove"),s.default.gameState=c.GameState.swapReset,this.blockManager.swapReset()},e.prototype.setSelectBlock=function(t){t?(this.selectBlock.active=!0,this.selectBlock.setPosition(t.position)):this.selectBlock.active=!1},e.prototype.swapBlock=function(t,e){s.default.gameState=c.GameState.swap,this.blockManager.swapBlock(t,e,s.default.config.SwapTime)},e.prototype.startRain=function(){s.default.gameState=c.GameState.startRain,this.blockManager.startRainAnimation()},e.prototype.endRain=function(){this.blockManager.endRain(),this.dropMatch()},e.Instance=null,i([h(a.default)],e.prototype,"blockManager",void 0),i([h(cc.Node)],e.prototype,"selectBlock",void 0),e=o=i([u],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../data/const":"const","../data/store":"store","../fw/SoundManager":"SoundManager","../logic/actionCount":"actionCount","./BlockManager":"BlockManager"}],GameScene:[function(t,e,o){"use strict";cc._RF.push(e,"712a6lEA6FDNbzb9HNZ+7K7","GameScene");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./fw/IFrame"),a=t("./fw/PoolManager"),s=t("./fw/SoundManager"),c=t("./gameObject/Cloud"),p=t("./gameObject/EffectDropFish"),l=t("./gameObject/EffectEatFish"),u=t("./gameObject/EffectScore"),h=t("./gameObject/EffectTime"),f=t("./gameObject/Shark1"),d=t("./gameObject/Shark2"),y=t("./manager/GameManager"),m=cc._decorator,_=m.ccclass,g=m.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effectDropFish=null,e.effectDropFishContainer=null,e.effectScore=null,e.effectScoreContainer=null,e.effectTime=null,e.effectTimeContainer=null,e.effectEatFish=null,e.effectEatFishContainer=null,e.cloud=null,e.cloudContainer=null,e.shark1=null,e.shark1Container=null,e.shark2=null,e.shark2Container=null,e}return n(e,t),e.prototype.onLoad=function(){var t=this;r.default.Instance.node.on(r.default.EventType.gamePlay,function(){y.default.Instance.startGame(),cc.game.canvas.focus(),t.onGameStart()}),r.default.Instance.node.on(r.default.EventType.gameRetry,function(){y.default.Instance.startGame(),cc.game.canvas.focus(),t.onGameStart()}),r.default.Instance.node.on(r.default.EventType.gamePause,function(){cc.game.pause()}),r.default.Instance.node.on(r.default.EventType.gameResume,function(){cc.game.resume(),cc.game.canvas.focus()}),r.default.Instance.node.on(r.default.EventType.soundOn,function(){s.default.Instance.mute=!1}),r.default.Instance.node.on(r.default.EventType.soundOff,function(){cc.audioEngine.pauseAll(),s.default.Instance.mute=!0}),y.default.Instance.node.on("updateScore",function(t){r.default.Instance.updateScore(t)}),y.default.Instance.node.on("gameOver",function(t){r.default.Instance.gameOver(t)}),a.default.add("effectDropFish",this.effectDropFish,this.effectDropFishContainer,function(t){return t.getComponent(p.default)}),a.default.add("effectScore",this.effectScore,this.effectScoreContainer,function(t){return t.getComponent(u.default)}),a.default.add("effectTime",this.effectTime,this.effectTimeContainer,function(t){return t.getComponent(h.default)}),a.default.add("effectEatFish",this.effectEatFish,this.effectEatFishContainer,function(t){return t.getComponent(l.default)}),a.default.add("cloud",this.cloud,this.cloudContainer,function(t){return t.getComponent(c.default)}),a.default.add("shark1",this.shark1,this.shark1Container,function(t){return t.getComponent(f.default)}),a.default.add("shark2",this.shark2,this.shark2Container,function(t){return t.getComponent(d.default)})},e.prototype.start=function(){r.default.Instance.ready()},e.prototype.onGameStart=function(){a.default.clear("effectDropFish"),a.default.clear("effectScore"),a.default.clear("effectTime"),a.default.clear("effectEatFish")},i([g(cc.Prefab)],e.prototype,"effectDropFish",void 0),i([g(cc.Node)],e.prototype,"effectDropFishContainer",void 0),i([g(cc.Prefab)],e.prototype,"effectScore",void 0),i([g(cc.Node)],e.prototype,"effectScoreContainer",void 0),i([g(cc.Prefab)],e.prototype,"effectTime",void 0),i([g(cc.Node)],e.prototype,"effectTimeContainer",void 0),i([g(cc.Prefab)],e.prototype,"effectEatFish",void 0),i([g(cc.Node)],e.prototype,"effectEatFishContainer",void 0),i([g(cc.Prefab)],e.prototype,"cloud",void 0),i([g(cc.Node)],e.prototype,"cloudContainer",void 0),i([g(cc.Prefab)],e.prototype,"shark1",void 0),i([g(cc.Node)],e.prototype,"shark1Container",void 0),i([g(cc.Prefab)],e.prototype,"shark2",void 0),i([g(cc.Node)],e.prototype,"shark2Container",void 0),e=i([_],e)}(cc.Component);o.default=v,cc._RF.pop()},{"./fw/IFrame":"IFrame","./fw/PoolManager":"PoolManager","./fw/SoundManager":"SoundManager","./gameObject/Cloud":"Cloud","./gameObject/EffectDropFish":"EffectDropFish","./gameObject/EffectEatFish":"EffectEatFish","./gameObject/EffectScore":"EffectScore","./gameObject/EffectTime":"EffectTime","./gameObject/Shark1":"Shark1","./gameObject/Shark2":"Shark2","./manager/GameManager":"GameManager"}],IFrame:[function(t,e,o){"use strict";cc._RF.push(e,"2c540A717ZC4ZeiPl7pMtH2","IFrame");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){if(!o._instance){var t=new cc.Node("IFrame");cc.game.addPersistRootNode(t),o._instance=t.addComponent(o)}return o._instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o._instance=this,window.addEventListener("message",this._onMessage.bind(this))},e.prototype.ready=function(){window.parent!==window&&window.parent.postMessage({type:o.EventType.gameReady},"*")},e.prototype.addEvent=function(t,e,o){this.node.on(t,e,o)},e.prototype.removeEvent=function(t,e,o){this.node.off(t,e,o)},e.prototype.updateScore=function(t){window.parent!==window&&window.parent.postMessage({type:o.EventType.updateScore,score:t},"*")},e.prototype.gameOver=function(t){window.parent!==window&&window.parent.postMessage({type:o.EventType.gameOver,score:t},"*")},e.prototype._onMessage=function(t){t.data&&t.data.type&&this.node.emit(t.data.type,t.data)},e.EventType={gamePlay:"@gamePlay",gameRetry:"@gameRetry",gameReady:"@gameReady",updateScore:"@updateScore",gameOver:"@gameOver",gamePause:"@gamePause",gameResume:"@gameResume",soundOn:"@soundOn",soundOff:"@soundOff",leftArrowDown:"@leftArrowDown",leftArrowUp:"@leftArrowUp",rightArrowDown:"@rightArrowDown",rightArrowUp:"@rightArrowUp",upArrowDown:"@upArrowDown",upArrowUp:"@upArrowUp",downArrowDown:"@downArrowDown",downArrowUp:"@downArrowUp",aButtonDown:"@aButtonDown",aButtonUp:"@aButtonUp",bButtonDown:"@bButtonDown",bButtonUp:"@bButtonUp",cButtonDown:"@cButtonDown",cButtonUp:"@cButtonUp"},e._instance=null,e=o=i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],ImageFont:[function(t,e,o){"use strict";cc._RF.push(e,"2e66bYRB4dNJom4Ss02aTwv","ImageFont");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteFrames=[],e.width=35,e.container=null,e.sprites=[],e.pivot=new cc.Vec2,e}return n(e,t),e.prototype.onLoad=function(){this.container=new cc.Node("container"),this.node.addChild(this.container),this.pivot.x=.5,this.pivot.y=.5},e.prototype.start=function(){},e.prototype.setText=function(t){var e=0,o=0,n=0,i=0;for(e=0;e<t.length;e++){var r=t[e],a=this.sprites[e];a||(a=this.createSprite()),a.node.active=!0;var s=this.spriteFrames[r];if(s){a.spriteFrame=s;var c=s.getOriginalSize();a.node.setPosition(o,0),o+=this.width,n+=c.width,i<c.height&&(i=c.height)}}for(;e<this.sprites.length;e++)this.sprites[e].node.active=!1;1===t.length?this.container.setPosition(-n*this.pivot.x,-i*this.pivot.y):this.container.setPosition(-o*this.pivot.x,-i*this.pivot.y)},e.prototype.setPivot=function(t,e){this.pivot.x=t,this.pivot.y=e},e.prototype.createSprite=function(){var t=new cc.Node(this.sprites.length.toString()),e=t.addComponent(cc.Sprite);return e.node.setAnchorPoint(0,0),this.container.addChild(t),this.sprites.push(e),e},i([s(cc.SpriteFrame)],e.prototype,"spriteFrames",void 0),i([s],e.prototype,"width",void 0),e=i([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],Init:[function(t,e,o){"use strict";cc._RF.push(e,"6614atVGE1FS7sVQg6CkYwD","Init");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){cc.macro.ENABLE_MULTI_TOUCH=!1,cc.view.enableAutoFullScreen(!1)},e.prototype.start=function(){},e=i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],InputManager:[function(t,e,o){"use strict";cc._RF.push(e,"df9b2I0kcFMnLfeTAWBR6o9","InputManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.KeyCode=void 0;var r,a=cc._decorator,s=a.ccclass,c=a.property;(function(t){t[t.none=0]="none",t[t.start=1]="start",t[t.stay=2]="stay",t[t.up=3]="up"})(r||(r={}));var p={LeftArrow:cc.macro.KEY.left,UpArrow:cc.macro.KEY.up,RightArrow:cc.macro.KEY.right,DownArrow:cc.macro.KEY.down,Keypad1:97,Keypad2:98,Keypad3:99,Keypad4:100,Keypad5:101,Keypad6:102,Keypad7:103,Keypad8:104,Keypad9:105,Num0:48,Num1:49,Num2:50,Num3:51,Num4:52,Num5:53,Num6:54,Num7:55,Num8:56,Num9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,Enter:13,Space:32,Delete:46};o.KeyCode=p;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._keyArr=[],e._keys={},e.screen=null,e._pointerState=r.none,e._pointerPosition=new cc.Vec2,e._button=0,e.frame=0,e.inputFrame=0,e}var o;return n(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o._instance||cc.log("InputManager\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c"),o._instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o._instance=this,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this),this.screen&&(this.screen.on(cc.Node.EventType.MOUSE_DOWN,this._onMouseDown.bind(this)),this.screen.on(cc.Node.EventType.MOUSE_UP,this._onMouseUp.bind(this)),this.screen.on(cc.Node.EventType.MOUSE_MOVE,this._onMouseMove.bind(this)),this.screen.on(cc.Node.EventType.TOUCH_START,this._onTouchStart.bind(this)),this.screen.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd.bind(this)),this.screen.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove.bind(this)),this.screen.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel.bind(this)))},e.prototype.start=function(){},e.prototype.onDestroy=function(){o._instance=null,cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this)},e.prototype.addKey=function(t){this._keys[t]||(this._keys[t]={keyCode:t,state:r.none},this._keyArr.push(this._keys[t]))},e.prototype.removeKey=function(t){if(this._keys[t]){var e=this._keyArr.indexOf(this._keys[t]);-1!==e&&this._keyArr.splice(e,1),this._keys[t]=void 0}},e.prototype.update=function(t){for(var e=this._keyArr.length,o=0;o<e;o++){var n=this._keyArr[o];n.state===r.start?n.state=r.stay:n.state===r.up&&(n.state=r.none)}this._pointerState===r.start&&this.inputFrame!==this.frame?this._pointerState=r.stay:this._pointerState===r.up&&this.inputFrame!==this.frame&&(this._pointerState=r.none),this.frame++},e.prototype.getKeyStay=function(t){return!!this._keys[t]&&this._keys[t].state===r.stay},e.prototype.getKeyDown=function(t){return!!this._keys[t]&&this._keys[t].state===r.start},e.prototype.getKeyUp=function(t){return!!this._keys[t]&&this._keys[t].state===r.up},e.prototype.getPointerDown=function(){return this._pointerState===r.start},e.prototype.getPointerStay=function(){return this._pointerState===r.stay},e.prototype.getPointerUp=function(){return this._pointerState===r.up},e.prototype.getPointerPosition=function(t){return void 0===t&&(t=null),t||(t=new cc.Vec2),t.set(this._pointerPosition),t},e.prototype.getPointerPositionOrigin=function(){return this._pointerPosition},e.prototype._onKeyDown=function(t){var e=t.keyCode;this._keys[e]&&this._keys[e].state===r.none&&(this._keys[e].state=r.start)},e.prototype._onKeyUp=function(t){var e=t.keyCode;this._keys[e]&&(this._keys[e].state=r.up)},e.prototype._onMouseDown=function(t){this._pointerState===r.none&&(this.inputFrame=this.frame,this._pointerState=r.start,this._updateScreenPosition(t))},e.prototype._onMouseUp=function(t){this._pointerState!==r.start&&this._pointerState!==r.stay||(this.inputFrame=this.frame,this._pointerState=r.up)},e.prototype._onMouseMove=function(t){this._updateScreenPosition(t)},e.prototype._onTouchStart=function(t){this._pointerState===r.none&&(this.inputFrame=this.frame,this._pointerState=r.start,this._updateScreenPosition(t))},e.prototype._onTouchEnd=function(t){this._pointerState!==r.start&&this._pointerState!==r.stay||(this.inputFrame=this.frame,this._pointerState=r.up)},e.prototype._onTouchMove=function(t){this._updateScreenPosition(t)},e.prototype._onTouchCancel=function(t){this._pointerState!==r.start&&this._pointerState!==r.stay||(this._pointerState=r.up)},e.prototype._updateScreenPosition=function(t){this.screen&&this.screen.convertToNodeSpaceAR(t.getLocation(),this._pointerPosition)},e._instance=null,i([c(cc.Node)],e.prototype,"screen",void 0),e=o=i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],ItemActionManager:[function(t,e,o){"use strict";cc._RF.push(e,"bb47eesB5JCsa6Xs4aAbBDJ","ItemActionManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../fw/Pool2"),a=t("../gameObject/ItemActionStraight"),s=t("./GameManager"),c=cc._decorator,p=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e.pool=null,e}var o;return n(e,t),o=e,e.prototype.onLoad=function(){o.Instance=this,this.pool=new r.default(this.prefab,this.node,function(t){return t.getComponent(a.default)})},e.prototype.start=function(){s.default.Instance.node.on("startGame",this.clear.bind(this))},e.prototype.clear=function(){this.pool.clear()},e.prototype.startItemAcion=function(t,e){this.pool.get().startAction(t,e)},e.Instance=null,i([l(cc.Prefab)],e.prototype,"prefab",void 0),e=o=i([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../fw/Pool2":"Pool2","../gameObject/ItemActionStraight":"ItemActionStraight","./GameManager":"GameManager"}],ItemActionStraight:[function(t,e,o){"use strict";cc._RF.push(e,"bbc230RSSNIHKcnkYHxFuWJ","ItemActionStraight");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../data/const"),a=t("../data/store"),s=t("../manager/GameManager"),c=cc._decorator,p=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.h=null,e.v=null,e.speed=0,e.isVertical=!1,e.nextCell1=null,e.nextCell2=null,e.position1=new cc.Vec2,e.position2=new cc.Vec2,e.delayTime=0,e}return n(e,t),e.prototype.startAction=function(t,e){this.position1.x=e.node.x,this.position1.y=e.node.y,this.position2.x=e.node.x,this.position2.y=e.node.y,this.isVertical=t,this.node.active=!0,this.node.setPosition(e.node.x,e.node.y),this.isVertical?(this.v.node.active=!0,this.h.node.active=!1,this.v.setAnimation(0,"boomb",!1)):(this.v.node.active=!1,this.h.node.active=!0,this.h.setAnimation(0,"boomb",!1)),this.delayTime=.7,this.speed=a.default.config.ItemActionSpeed,this.nextCell1=e,this.nextCell2=e,(this.nextCell1||this.nextCell2)&&s.default.Instance.actionCountUp()},e.prototype.endAction=function(){s.default.Instance.actionCountDown(),this.delayTime<=0&&(this.node.active=!1)},e.prototype.endDelay=function(){this.nextCell1||this.nextCell2||(this.node.active=!1)},e.prototype.update=function(t){if(this.nextCell1||this.nextCell2){var e=t*this.speed;this.isVertical?(this.position1.y+=e,this.position2.y-=e,this.nextCell1&&this.nextCell1.node.y<=this.position1.y&&(this.nextCell1=this.nextCell1.side[r.SideType.up],s.default.Instance.breakBlock(this.nextCell1,!0),this.checkEnd()),this.nextCell2&&this.nextCell2.node.y>=this.position2.y&&(this.nextCell2=this.nextCell2.side[r.SideType.down],s.default.Instance.breakBlock(this.nextCell2,!0),this.checkEnd())):(this.position1.x+=e,this.position2.x-=e,this.nextCell1&&this.nextCell1.node.x<=this.position1.x&&(this.nextCell1=this.nextCell1.side[r.SideType.right],s.default.Instance.breakBlock(this.nextCell1,!1),this.checkEnd()),this.nextCell2&&this.nextCell2.node.x>=this.position2.x&&(this.nextCell2=this.nextCell2.side[r.SideType.left],s.default.Instance.breakBlock(this.nextCell2,!1),this.checkEnd()))}this.delayTime>0&&(this.delayTime-=t,this.delayTime<=0&&this.endDelay())},e.prototype.checkEnd=function(){this.nextCell1||this.nextCell2||this.endAction()},i([l(sp.Skeleton)],e.prototype,"h",void 0),i([l(sp.Skeleton)],e.prototype,"v",void 0),e=i([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../data/const":"const","../data/store":"store","../manager/GameManager":"GameManager"}],MainShark:[function(t,e,o){"use strict";cc._RF.push(e,"31c2bwzbL9J1I6hJDTN5Xoo","MainShark");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r,a=t("../data/store"),s=t("../fw/PoolManager"),c=t("../manager/GameManager"),p=cc._decorator,l=p.ccclass,u=p.property;(function(t){t[t.normal=0]="normal",t[t.hurry=1]="hurry",t[t.eat=2]="eat",t[t.gameOver=3]="gameOver"})(r||(r={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgSpine=null,e.spine=null,e.state=r.normal,e.fish=[],e}return n(e,t),e.prototype.start=function(){this.bgSpine.setAnimation(0,"normal",!0),this.spine.setAnimation(0,"idle",!0),c.default.Instance.node.on("startGame",this.onStartGame.bind(this)),c.default.Instance.node.on("gameOver",this.onGameOver.bind(this)),c.default.Instance.node.on("addFish",this.addFish.bind(this))},e.prototype.onStartGame=function(){this.state=r.normal,this.fish.length=0,s.default.clear("effectEatFish"),this.bgSpine.setAnimation(0,"normal",!0),this.spine.setAnimation(0,"idle",!0)},e.prototype.onGameOver=function(){this.state=r.gameOver,this.spine.setAnimation(0,"gameover",!1),this.spine.addAnimation(0,"gameover_loop",!0)},e.prototype.addFish=function(t){a.default.isPlay&&this.fish.push(t)},e.prototype.startEat=function(){this.state=r.eat,this.spine.setAnimation(0,"eat",!0)},e.prototype.startEndEat=function(){this.spine.setAnimation(0,"eat_end",!1),a.default.time<=a.default.config.HurryTime?(this.state=r.hurry,this.spine.addAnimation(0,"hurry",!0)):a.default.time>a.default.config.HurryTime&&(this.state=r.normal,this.spine.addAnimation(0,"idle",!0))},e.prototype.startCombo=function(){this.bgSpine.setAnimation(0,"combo",!0)},e.prototype.endCombo=function(){this.bgSpine.setAnimation(0,"normal",!0)},e.prototype.startGameOver=function(){this.state=r.gameOver,this.spine.setAnimation(0,"gameover",!1),this.spine.addAnimation(0,"gameover_loop",!0)},e.prototype.update=function(t){switch(this.state){case r.gameOver:break;case r.normal:case r.hurry:a.default.time<=a.default.config.HurryTime&&this.state===r.normal?(this.state=r.hurry,this.spine.setAnimation(0,"hurry",!0)):a.default.time>a.default.config.HurryTime&&this.state===r.hurry&&(this.state=r.normal,this.spine.setAnimation(0,"idle",!0)),this.fish.length&&this.startEat();break;case r.eat:s.default.useCount("effectEatFish")||this.startEndEat()}this.fish.length&&s.default.get("effectEatFish").startEffect(this.fish.shift())},i([u(sp.Skeleton)],e.prototype,"bgSpine",void 0),i([u(sp.Skeleton)],e.prototype,"spine",void 0),e=i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../data/store":"store","../fw/PoolManager":"PoolManager","../manager/GameManager":"GameManager"}],Pool2:[function(t,e,o){"use strict";cc._RF.push(e,"fe273tZvv1G27wraMTRPryT","Pool2"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t,e,o){this.pool=[],this.prefab=null,this.parenttNode=null,this.getCall=null,this.prefab=t,this.parenttNode=e,this.getCall=o}return t.prototype.clear=function(){for(var t=0;t<this.pool.length;t++)this.pool[t].active=!1},t.prototype.get=function(){for(var t=null,e=0;e<this.pool.length;e++)if(!this.pool[e].active){t=this.pool[e];break}return t||(t=cc.instantiate(this.prefab),this.pool.push(t),this.parenttNode&&this.parenttNode.addChild(t)),t.active=!0,this.getCall&&this.getCall(t)||t},t.prototype.getUseCount=function(){for(var t=0,e=0;e<this.pool.length;e++)this.pool[e].active&&t++;return t},t.prototype.return=function(t){t.active=!1},t}();o.default=n,cc._RF.pop()},{}],PoolManager:[function(t,e,o){"use strict";cc._RF.push(e,"f762agR6LhLBL/VxkbgHtav","PoolManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Pool2"),i=new(function(){function t(){this.pools={}}return t.prototype.add=function(t,e,o,i){void 0===i&&(i=null),this.pools[t]=new n.default(e,o,i)},t.prototype.get=function(t){return this.pools[t].get()},t.prototype.useCount=function(t){return this.pools[t].getUseCount()},t.prototype.clear=function(t){this.pools[t].clear()},t}());o.default=i,cc._RF.pop()},{"./Pool2":"Pool2"}],Pool:[function(t,e,o){"use strict";cc._RF.push(e,"db2eefwAUJGNbE1jssRzYDI","Pool"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Stack"),i=function(){function t(t,e,o){this.pool=new cc.NodePool,this.prefab=null,this.parenttNode=null,this.getCall=null,this.useArr=new n.default(20),this.prefab=t,this.parenttNode=e,this.getCall=o}return t.prototype.getUseCount=function(){return this.useArr.length},t.prototype.clear=function(){for(;0<this.useArr.length;){var t=this.useArr.pop();this.return(t)}},t.prototype.get=function(){var t=null;return t=this.pool.size()>0?this.pool.get():cc.instantiate(this.prefab),this.useArr.push(t),t.active=!0,this.parenttNode&&this.parenttNode.addChild(t),this.getCall&&this.getCall(t)||t},t.prototype.return=function(t){t.active=!1,this.useArr.remove(t),this.parenttNode&&this.parenttNode.removeChild(t),this.pool.put(t)},t}();o.default=i,cc._RF.pop()},{"./Stack":"Stack"}],PrefabManager:[function(t,e,o){"use strict";cc._RF.push(e,"3641awH1Z9OhIderfRcaf0p","PrefabManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabs=[],e}var o;return n(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o._instance||cc.log("PrefabManager\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c"),o._instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o._instance=this},e.prototype.onDestroy=function(){o._instance=null},e.prototype.getPrefab=function(t){return this.prefabs.find(function(e){return e.name===t})},e._instance=null,i([s(cc.Prefab)],e.prototype,"prefabs",void 0),e=o=i([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],Responsive:[function(t,e,o){"use strict";cc._RF.push(e,"35526ecpeFKv6uxjduSLjTe","Responsive");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(e,o){var n=t.call(this)||this;return n.maxW=0,n.maxH=0,n.maxW=e,n.maxH=o,n}return n(e,t),e.prototype.apply=function(t,e){var o=t.getFrameSize(),n=this.maxW,i=this.maxH,r=o.width,a=o.height,s=cc.game.container.style,c=e.width,p=e.height,l=c/p,u=r/a,h=r,f=a;if(l<u){var d=c*(u/l);if(d>n)h=n*(r/d)}else{var y=p*(l/u);if(y>i)f=i*(a/y)}var m=Math.round((r-h)/2),_=Math.round((a-f)/2);h=r-2*m,f=a-2*_,this._setupContainer(t,h,f),t._isRotated?s.margin="0 0 0 "+a+"px":s.margin="0px",s.paddingLeft=m+"px",s.paddingRight=m+"px",s.paddingTop=_+"px",s.paddingBottom=_+"px"},e.prototype._setupContainer=function(t,e,o){var n=cc.game.canvas;this._setupStyle(t,e,o);var i=t._devicePixelRatio=1;t.isRetinaEnabled()&&(i=t._devicePixelRatio=Math.min(t._maxPixelRatio,window.devicePixelRatio||1)),n.width=e*i,n.height=o*i},e.prototype._setupStyle=function(t,e,o){var n=cc.game.canvas,i=cc.game.container;cc.sys.os===cc.sys.OS_ANDROID&&(document.body.style.width=(t._isRotated?o:e)+"px",document.body.style.height=(t._isRotated?e:o)+"px"),i.style.width=n.style.width=e+"px",i.style.height=n.style.height=o+"px"},e}(cc.ContainerStrategy),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._result={scale:[1,1],viewport:null},e}return n(e,t),e.prototype.origin_apply=function(t,e){},e.prototype.apply=function(t,e){var o=cc.game.canvas.width,n=cc.game.canvas.height,i=o/e.width,r=n/e.height,a=i<r?i:r,s=o,c=n;return this._buildResult(o,n,s,c,a,a)},e.prototype.postApply=function(t){},e.prototype._buildResult=function(t,e,o,n,i,r){Math.abs(t-o)<2&&(o=t),Math.abs(e-n)<2&&(n=e);var a=cc.rect((t-o)/2,(e-n)/2,o,n);return cc.game.renderType,cc.game.RENDER_TYPE_CANVAS,this._result.scale=[i,r],this._result.viewport=a,this._result},e}(cc.ContentStrategy),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxWidth=0,e.maxHeight=0,e}return n(e,t),e.prototype.onLoad=function(){var t=cc.view.getDesignResolutionSize();this.maxWidth||(this.maxWidth=t.width),this.maxHeight||(this.maxHeight=t.height);var e=new cc.ResolutionPolicy(new c(this.maxWidth,this.maxHeight),new p);cc.view.setDesignResolutionSize(t.width,t.height,e)},i([s],e.prototype,"maxWidth",void 0),i([s],e.prototype,"maxHeight",void 0),e=i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],SetWindowBlur:[function(t,e,o){"use strict";cc._RF.push(e,"b9470vxuNNF3Y7p4B2NSLqM","SetWindowBlur");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onFocuscall=e.onFocus.bind(e),e.onBlurCall=e.onBlur.bind(e),e}return n(e,t),e.prototype.onLoad=function(){window.addEventListener("focus",this.onFocuscall),window.addEventListener("blur",this.onBlurCall)},e.prototype.onFocus=function(){cc.game.resume()},e.prototype.onBlur=function(){cc.game.pause()},e.prototype.onDestroy=function(){window.removeEventListener("focus",this.onFocuscall),window.removeEventListener("blur",this.onBlurCall)},e=i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],Shark1:[function(t,e,o){"use strict";cc._RF.push(e,"90bd4XFa7lAw5ISMrk/GWli","Shark1");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r,a=t("../fw/Util"),s=cc._decorator,c=s.ccclass;s.property;(function(t){t[t.none=0]="none",t[t.up=1]="up",t[t.move=2]="move",t[t.down=3]="down"})(r||(r={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=r.none,e.spine=null,e.moveSpeed=25,e.moveDistance=0,e.dir=1,e.time=0,e.maxTime=0,e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.spine=this.node.getComponent(sp.Skeleton),this.spine.setCompleteListener(function(e){"up"===e.animation.name?t.state=r.move:"down"===e.animation.name&&(t.node.active=!1)})},e.prototype.onEnable=function(){var t=cc.find("Canvas").getContentSize().width;this.node.x=a.default.Math.randomInt(-t/2,t/2),this.node.y=a.default.Math.randomInt(-380,-360),this.spine.setAnimation(0,"up",!1),this.spine.addAnimation(0,"idle",!0),this.node.parent.children.sort(function(t,e){return t.y-e.y}),this.moveDistance=a.default.Math.randomInt(0,t/2),this.node.x>0?(this.dir=-1,this.node.scaleX=-1):(this.dir=1,this.node.scaleX=1)},e.prototype.update=function(t){var e=t*this.moveSpeed;this.node.x+=e*this.dir,this.moveDistance-=e,this.state===r.move&&this.moveDistance<=0&&(this.state=r.down,this.spine.setAnimation(0,"down",!1))},e=i([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../fw/Util":"Util"}],Shark2:[function(t,e,o){"use strict";cc._RF.push(e,"174d3HB2TFHnoDzSD8LqafI","Shark2");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r,a=t("../fw/Util"),s=cc._decorator,c=s.ccclass;s.property;(function(t){t[t.none=0]="none",t[t.up=1]="up",t[t.move=2]="move",t[t.down=3]="down"})(r||(r={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=r.none,e.spine=null,e.moveSpeed=50,e.moveDistance=0,e.dir=1,e.time=0,e.maxTime=0,e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.spine=this.node.getComponent(sp.Skeleton),this.spine.setCompleteListener(function(e){"up"===e.animation.name?t.state=r.move:"down"===e.animation.name&&(t.node.active=!1)})},e.prototype.onEnable=function(){var t=cc.find("Canvas").getContentSize().width;this.node.x=a.default.Math.randomInt(-t/2,t/2),this.node.y=a.default.Math.randomInt(-430,-440),this.spine.setAnimation(0,"up",!1),this.spine.addAnimation(0,"idle",!0),this.node.parent.children.sort(function(t,e){return t.y-e.y}),this.moveDistance=a.default.Math.randomInt(0,t/2),this.node.x>0?(this.dir=-1,this.node.scaleX=1):(this.dir=1,this.node.scaleX=-1)},e.prototype.update=function(t){var e=t*this.moveSpeed;this.node.x+=e*this.dir,this.moveDistance-=e,this.state===r.move&&this.moveDistance<=0&&(this.state=r.down,this.spine.setAnimation(0,"down",!1))},e=i([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../fw/Util":"Util"}],SoundManager:[function(t,e,o){"use strict";cc._RF.push(e,"dc250EkdThEIrZIeXPieWBR","SoundManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sounds={},e._mute=!1,e._bgm=null,e}var o;return n(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o._instance||cc.log("InputManager\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c"),o._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mute",{set:function(t){this._mute=t,this._bgm&&(t?this._bgm.play():this._bgm.stop())},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o._instance=this;for(var t=0;t<this.node.childrenCount;t++){var e=this.node.children[t],n=e.getComponent(cc.AudioSource);n&&(this._sounds[e.name]=n)}},e.prototype.onDestroy=function(){o._instance=null},e.prototype.playSound=function(t,e){!this._mute&&this._sounds[t]&&(this._sounds[t].play(),e&&(this._sounds[t].volume=e))},e.prototype.playBgm=function(t){!this._mute&&this._sounds[t]?(this._bgm=this._sounds[t],this._bgm.loop=!0,this._bgm.play()):this._mute&&(this._bgm=this._sounds[t])},e.prototype.stopBgm=function(){this._bgm&&(this._bgm.stop(),this._bgm=null)},e._instance=null,e=o=i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],Stack:[function(t,e,o){"use strict";cc._RF.push(e,"05050ydm+5Mp4wjp1GFJnEW","Stack"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t){void 0===t&&(t=100),this.arr=[],this.size=0,this.oriSize=0,this._length=0,this.oriSize=t,this.arr.length=t,this.size=t,this._length=0}return Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),t.prototype.clear=function(){for(var t=0;t<this.length;t++)this.arr[t]=void 0;this._length=0},t.prototype.push=function(t){this.length>=this.size&&(this.arr.length+=this.oriSize,this.size=this.arr.length),this.arr[this._length++]=t},t.prototype.pop=function(){var t=this.arr[--this._length];return this.arr[this.length]=void 0,t},t.prototype.remove=function(t){var e=this.arr.indexOf(t);e>-1&&this.splice(e,1)},t.prototype.splice=function(t,e){var o=this.length;if(!(t>=o||e<=0)){for(var n=o-(e=t+e>o?o-t:e),i=t;i<n;i++)this.arr[i]=this.arr[i+e],this.arr[i+e]=void 0;this._length=n}},t}();o.default=n,cc._RF.pop()},{}],Timer:[function(t,e,o){"use strict";cc._RF.push(e,"4f6feUcET5EM7aa7VZ7LTzH","Timer");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../data/const"),a=t("../data/store"),s=t("../fw/SoundManager"),c=t("../manager/GameManager"),p=cc._decorator,l=p.ccclass,u=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gauge=null,e.hurryGauge=null,e.addGauge=null,e.timeText=null,e.board_hurry=null,e.gaugeValue=0,e.ht=0,e.isHurry=!1,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){c.default.Instance.node.on("startGame",this.onStartGame.bind(this)),c.default.Instance.node.on("gameOver",this.onGameOver.bind(this)),c.default.Instance.node.on("setTune",this.setTime.bind(this)),c.default.Instance.node.on("addTime",this.addTime.bind(this))},e.prototype.onGameOver=function(){s.default.Instance.stopBgm()},e.prototype.onStartGame=function(){this.isHurry=!1,this.hurryGauge.node.active=!1,this.gaugeValue=a.default.config.MaxTime,this.gauge.node.width=306,this.addGauge.node.width=306,this.hurryGauge.node.width=306,this.timeText.string=a.default.config.MaxTime.toString(),s.default.Instance.stopBgm()},e.prototype.setTime=function(t){this.gaugeValue=t,this.refreshTime()},e.prototype.addTime=function(t){this.refreshTime()},e.prototype.refreshTime=function(){var t=Math.ceil(a.default.time);this.timeText.string=t.toString(),this.gauge.node.width=this.gaugeValue/a.default.config.MaxTime*306,this.addGauge.node.width=a.default.time/a.default.config.MaxTime*306,this.hurryGauge.node.width=this.gaugeValue/a.default.config.MaxTime*306,t<=a.default.config.HurryTime&&!this.isHurry?(this.isHurry=!0,this.hurryGauge.node.active=!0,this.board_hurry.node.active=!0,this.ht=0,this.timeText.node.color=new cc.Color(16724480),s.default.Instance.playBgm("hurryup")):t>a.default.config.HurryTime&&this.isHurry&&(this.isHurry=!1,this.hurryGauge.node.active=!0,this.board_hurry.node.active=!1,this.timeText.node.color=new cc.Color(4280405),s.default.Instance.stopBgm())},e.prototype.update=function(t){if(a.default.isPlay){switch(a.default.gameState){case r.GameState.wait:case r.GameState.swap:case r.GameState.swapReset:a.default.time-=t,this.gaugeValue<a.default.time?(this.gaugeValue+=50*t,this.gaugeValue>=a.default.time&&(this.gaugeValue=a.default.time)):this.gaugeValue=a.default.time,a.default.time<=0&&(a.default.gameState===r.GameState.wait?c.default.Instance.gameOver():a.default.time=0),this.refreshTime();break;case r.GameState.break:case r.GameState.drop:}if(this.isHurry){this.ht+=2*t;var e=Math.abs(Math.sin(this.ht));this.hurryGauge.node.opacity=255*e,this.board_hurry.node.opacity=255*e}else this.board_hurry.node.active=!1}},i([u(cc.Sprite)],e.prototype,"gauge",void 0),i([u(cc.Sprite)],e.prototype,"hurryGauge",void 0),i([u(cc.Sprite)],e.prototype,"addGauge",void 0),i([u(cc.Label)],e.prototype,"timeText",void 0),i([u(cc.Sprite)],e.prototype,"board_hurry",void 0),e=i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../data/const":"const","../data/store":"store","../fw/SoundManager":"SoundManager","../manager/GameManager":"GameManager"}],Util:[function(t,e,o){"use strict";cc._RF.push(e,"7efea/c5ddNqaM8pE0fC4/g","Util"),Object.defineProperty(o,"__esModule",{value:!0});var n={Math:function(){function t(){}return t.randomInt=function(t,e){return Math.floor(Math.random()*(e-t)+t)},t.randomFloat=function(t,e){return Math.random()*(e-t)+t},t.lerp=function(t,e,o){return cc.misc.lerp(t,e,o)},t.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t.clamp=function(t,e,o){return t<e?e:t>o?o:t},t.intersectLines=function(t,e,o,n,i,r,a,s){i&&(t={x:t,y:e},e={x:o,y:n},o={x:i,y:s},n={x:a,y:s});var c=(n.y-o.y)*(e.x-t.x)-(n.x-o.x)*(e.y-t.y);if(0===c)return 0;var p=((n.x-o.x)*(t.y-o.y)-(n.y-o.y)*(t.x-o.x))/c,l=((e.x-t.x)*(t.y-o.y)-(e.y-t.y)*(t.x-o.x))/c;return p>=0&&p<=1&&l>=0&&l<=1?c:0},t}(),CsvParser:function(){function t(){}return t.parse=function(e){e=t.removeLine(e);var o=[],n=[],i={str:""};i.str="";for(var r=!0,a=0,s={},c=0;c<e.length;c++)switch(e[c]){case"\r":break;case"\n":case void 0:r?(n.push(i.str),r=!1):(s[n[a]]=i.str,o.push(s)),i.str="",a=0,s={};break;case'"':for(c++;;)if('"'===e[c]&&'"'===e[c+1])i.str+=e[c],c++,c++;else{if(!('"'!==e[c]||e[c+1]&&'"'===e[c+1]))break;i.str+=e[c],c++}break;case",":r?n.push(i.str):s[n[a]]=i.str,a++,i.str="";break;case"\ufeff":break;default:i.str+=e[c]}return 0!==a&&(s[n[a]]=i.str,o.push(s)),o},t.removeLine=function(t){for(var e=t.split("\n"),o="",n=0;n<e.length;n++)"#"!==e[n][0]&&(o+=""===o?e[n]:"\n"+e[n]);return o},t}()};o.default=n,cc._RF.pop()},{}],actionCount:[function(t,e,o){"use strict";cc._RF.push(e,"4d314lqUCtCX7ugaRPm9lgy","actionCount");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../data/store"),r=t("../data/const"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.count=0,e.actionTuen=0,e}return n(e,t),e.prototype.clear=function(){this.count=0,this.actionTuen=0},e.prototype.countUp=function(){this.count++},e.prototype.countDown=function(){this.count--,0===this.count&&(this.actionTuen++,this.onCountZero())},e.prototype.onCountZero=function(){if(i.default.isPlay)switch(i.default.gameState){case r.GameState.wait:this.emit("wait");break;case r.GameState.swap:this.emit("swap");break;case r.GameState.swapReset:this.emit("swapReset");break;case r.GameState.break:this.emit("break");break;case r.GameState.drop:this.emit("drop");break;case r.GameState.noMoreMatch:this.emit("noMoreMatch");break;case r.GameState.noMoreMatchReset:this.emit("noMoreMatchReset");break;case r.GameState.startRain:this.emit("startRain")}},e.prototype.getActionTurn=function(){return this.actionTuen},e.prototype.isAction=function(){return this.count>0},e}(t("events").EventEmitter);o.default=a,cc._RF.pop()},{"../data/const":"const","../data/store":"store",events:1}],cell:[function(t,e,o){"use strict";cc._RF.push(e,"3eef3eGYgZA65D5cvqPRvgV","cell"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../data/const"),i=function(){function t(){this.index=0,this.indexX=0,this.indexY=0,this.side=[],this.block=null,this.node=new cc.Vec2}return t.prototype.setSide=function(t,e,o,i){this.side[n.SideType.up]=t,this.side[n.SideType.down]=e,this.side[n.SideType.left]=o,this.side[n.SideType.right]=i},t.prototype.setBlock=function(t){this.block=t},t.prototype.getBlock=function(){return this.block},t}();o.default=i,cc._RF.pop()},{"../data/const":"const"}],config:[function(t,e,o){"use strict";cc._RF.push(e,"07a1bRs4ApPjK7WT/4eXJsF","config"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){return function(){this.MaxBlock=6,this.MovePixel=40,this.SwapTime=.2,this.WaterDropSpeed=400,this.WaterDropY=400,this.EffectTime=.4,this.ComboTime=2,this.MaxCombo=10,this.HurryTime=10,this.DropSpeed=500,this.EatFishDropSpeed=500,this.ItemActionSpeed=661,this.MaxTime=60,this.AddTime1=3,this.AddTime2=4,this.AddTime3=5,this.DefaultScore=60,this.AddScore=40,this.ScoreEffectMove=56,this.ScoreEffectTime=1,this.TimeEffectTime=1.5}}();o.default=n,cc._RF.pop()},{}],const:[function(t,e,o){"use strict";var n,i,r,a;cc._RF.push(e,"182d3KtRWtDIIX1I5YUqfbs","const"),Object.defineProperty(o,"__esModule",{value:!0}),o.ItemCount=o.CountY=o.CountX=o.GameState=o.SideType=o.ItemType=o.BlockType=void 0,function(t){t[t.none=0]="none",t[t.block_1=1]="block_1",t[t.block_2=2]="block_2",t[t.block_3=3]="block_3",t[t.block_4=4]="block_4",t[t.block_5=5]="block_5",t[t.block_6=6]="block_6"}(n||(n={})),o.BlockType=n,function(t){t[t.none=0]="none",t[t.color=1]="color",t[t.square=2]="square",t[t.vertical=3]="vertical",t[t.horizon=4]="horizon"}(i||(i={})),o.ItemType=i,function(t){t[t.up=0]="up",t[t.down=1]="down",t[t.left=2]="left",t[t.right=3]="right"}(r||(r={})),o.SideType=r,function(t){t[t.none=0]="none",t[t.wait=1]="wait",t[t.swap=2]="swap",t[t.swapReset=3]="swapReset",t[t.break=4]="break",t[t.drop=5]="drop",t[t.noMoreMatch=6]="noMoreMatch",t[t.noMoreMatchReset=7]="noMoreMatchReset",t[t.startRain=8]="startRain"}(a||(a={})),o.GameState=a;o.CountX=9;o.CountY=9;o.ItemCount=4,cc._RF.pop()},{}],dropCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"30090PsnTRJk7hRoFPLavEN","dropCtrl"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../manager/GameManager"),i=function(){function t(){this.block=null,this.speed=0,this.active=!1,this.distCell=null}return t.prototype.start=function(t,e,o,i,r){this.active=!0,this.block=t,this.block.node.setPosition(e,o),this.distCell=i,this.speed=r,this.block.startDrop(),n.default.Instance.actionCountUp()},t.prototype.finish=function(){this.active=!1,this.block=null,this.distCell=null},t.prototype.update=function(t){var e=this.block.node.y-this.speed*t;if(e<=this.distCell.node.y)return e=this.distCell.node.y,this.block.finishDrop(),n.default.Instance.actionCountDown(),this.block.node.y=e,void this.finish();this.block.node.y=e},t}(),r=function(){function t(){this.drops=[]}return t.prototype.clear=function(){this.drops.length=0},t.prototype.update=function(t){for(var e=0;e<this.drops.length;e++){var o=this.drops[e];o.active&&o.update(t)}},t.prototype.startDrop=function(t,e,o,n,r){for(var a=0;a<this.drops.length;a++){var s=this.drops[a];if(!s.active)return void s.start(t,e,o,n,r)}var c=new i;this.drops.push(c),c.start(t,e,o,n,r)},t}();o.default=r,cc._RF.pop()},{"../manager/GameManager":"GameManager"}],generator:[function(t,e,o){"use strict";cc._RF.push(e,"83150JIRd5FvaxL0YzOvKXp","generator"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../fw/Util"),i=t("../data/store"),r=function(){function t(){this.preType=0,this.preType=n.default.Math.randomInt(1,i.default.config.MaxBlock+1)}return t.prototype.getType=function(t){void 0===t&&(t=void 0);for(var e=n.default.Math.randomInt(1,i.default.config.MaxBlock+1),o=0;!(++o>1e4);)if(e!==this.preType){if(void 0===t||t!==e)break;e=n.default.Math.randomInt(1,i.default.config.MaxBlock+1)}else e=n.default.Math.randomInt(1,i.default.config.MaxBlock+1);return this.preType=e,e},t}();o.default=r,cc._RF.pop()},{"../data/store":"store","../fw/Util":"Util"}],match:[function(t,e,o){"use strict";cc._RF.push(e,"89409q0FrVKoo5d3xjS3Zcu","match"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../data/const"),i=t("../data/store"),r=t("../fw/Util"),a=t("../manager/GameManager"),s=t("../manager/ItemActionManager"),c=t("../fw/PoolManager"),p=t("../fw/SoundManager"),l=function(){function t(t,e,o){this.cellsCheck=[],this.matchGroups=[],this.pool=null,this.cells=null,this.boardData=t,this.cellsCheck.length=n.CountX*n.CountY,this.pool=e,this.cells=o}return t.prototype.checkClear=function(){for(var t=0;t<this.cellsCheck.length;t++)this.cellsCheck[t]=0;this.matchGroups.length=0},t.prototype.getCell=function(t,e){var o=null;return t>=0&&t<n.CountX&&e>=0&&e<n.CountY&&(o=this.cells[e*n.CountX+t]),o},t.prototype.getCell2=function(t){var e=null;return t>=0&&t<n.CountX*n.CountY&&(e=this.cells[t]),e},t.prototype.match=function(){this.checkClear();for(var t=!1,e=0;e<n.CountY;e++)for(var o=0;o<n.CountX;o++){var i=this.getCell(o,e);if(i.block.type!==n.BlockType.none){var r=this.getCell(o,e-1),a=this.getCell(o,e+1),s=this.getCell(o-1,e),c=this.getCell(o+1,e);r&&a&&r.block.type===i.block.type&&a.block.type===i.block.type&&(t=!0,this.cellsCheck[r.index]++,this.cellsCheck[i.index]++,this.cellsCheck[a.index]++),s&&c&&s.block.type===i.block.type&&c.block.type===i.block.type&&(t=!0,this.cellsCheck[s.index]++,this.cellsCheck[i.index]++,this.cellsCheck[c.index]++)}}return t&&(this.matchGroup(),p.default.Instance.playSound("swap")),t},t.prototype.matchGroup=function(){for(var t=0;t<this.cells.length;t++)if(0!==this.cellsCheck[t]){var e=[],o=[];for(e.push(t),this.cellsCheck[t]=0;e.length>0;){var i=e.pop(),r=this.cells[i];o.push(i);var a=r.side[n.SideType.up],s=r.side[n.SideType.down],c=r.side[n.SideType.left],p=r.side[n.SideType.right];a&&this.cellsCheck[a.index]>0&&a.block.type===r.block.type&&(e.push(a.index),this.cellsCheck[a.index]=0),s&&this.cellsCheck[s.index]>0&&s.block.type===r.block.type&&(e.push(s.index),this.cellsCheck[s.index]=0),c&&this.cellsCheck[c.index]>0&&c.block.type===r.block.type&&(e.push(c.index),this.cellsCheck[c.index]=0),p&&this.cellsCheck[p.index]>0&&p.block.type===r.block.type&&(e.push(p.index),this.cellsCheck[p.index]=0)}this.matchGroups.push(o)}},t.prototype.breakBlocks=function(){for(var t=0;t<this.matchGroups.length;t++){var e=this.matchGroups[t],o=-1,s=this.getGroupRect(e),p=this.getRectCenterPosition(s);if(e.length>=n.ItemCount){var l=this.getRectType(s),u=0;0===l?u=i.default.config.AddTime1:1===l?u=i.default.config.AddTime2:2===l&&(u=i.default.config.AddTime3),o=e[r.default.Math.randomInt(0,e.length)],a.default.Instance.addTime(u),c.default.get("effectTime").startEffect(p.x,p.y,u,1.5)}for(var h=0;h<e.length;h++){var f=this.getCell2(e[h]);if(this.actionItem(f,s),o>0&&o===e[h]){var d=f.block;null===d||(d.setItemType(n.ItemType.square),d.actionTurn=a.default.Instance.getActionTurn(),0)}else this.breakBlock(f)&&0}var y=0;if(3===e.length)y=i.default.config.DefaultScore;else y=i.default.config.DefaultScore,y+=i.default.config.AddScore*Math.pow(2,e.length-3);var m=a.default.Instance.addCombo();c.default.get("effectScore").startEffect(p.x,p.y,y,m),a.default.Instance.addScore(y*m)}},t.prototype.breakBlock=function(t){if(null===t)return!1;var e=t.block;return null!==e&&(t.setBlock(null),e.cell=null,e.startBreak(),!0)},t.prototype.breakBlock2=function(t,e){if(null===t)return!1;var o=t.block;if(null===o)return!1;var n={width:0,height:0};return e?n.height=1:n.width=1,this.actionItem(t,n),o.startBreak(),t.setBlock(null),o.cell=null,!0},t.prototype.actionItem=function(t,e){if(null!==t){var o=t.block;if(null!==o&&o.item!==n.ItemType.none)switch(o.item){case n.ItemType.square:p.default.Instance.playSound("bomb"),this.createItemAction(t,e.width,e.height);break;case n.ItemType.vertical:case n.ItemType.horizon:case n.ItemType.color:}}},t.prototype.getGroupRect=function(t){for(var e={minX:n.CountX,maxX:0,minY:n.CountY,maxY:0,width:0,height:0},o=this.cells,i=0;i<t.length;i++){var r=o[t[i]].index,a=r%n.CountX,s=Math.floor(r/n.CountX);a<e.minX&&(e.minX=a),a>e.maxX&&(e.maxX=a),s<e.minY&&(e.minY=s),s>e.maxY&&(e.maxY=s)}return e.width=e.maxX-e.minX+1,e.height=e.maxY-e.minY+1,e},t.prototype.ballItemCheck=function(t,e){var o=t.side[n.SideType.up],i=t.side[n.SideType.down],r=t.side[n.SideType.left],s=t.side[n.SideType.right];o&&o.block&&o.block.type===n.BlockType.none&&o.block.actionTurn<a.default.Instance.getActionTurn()&&(this.breakBlock(o),this.createItemAction(o,e.width,e.height)),i&&i.block&&i.block.type===n.BlockType.none&&i.block.actionTurn<a.default.Instance.getActionTurn()&&(this.breakBlock(i),this.createItemAction(i,e.width,e.height)),r&&r.block&&r.block.type===n.BlockType.none&&r.block.actionTurn<a.default.Instance.getActionTurn()&&(this.breakBlock(r),this.createItemAction(r,e.width,e.height)),s&&s.block&&s.block.type===n.BlockType.none&&s.block.actionTurn<a.default.Instance.getActionTurn()&&(this.breakBlock(s),this.createItemAction(s,e.width,e.height))},t.prototype.createItemAction=function(t,e,o){var r,p=1;if(e<=o){s.default.Instance.startItemAcion(!1,t);for(var l=t;l.side[n.SideType.left];)(l=l.side[n.SideType.left]).block&&p++;for(l=t;l.side[n.SideType.right];)(l=l.side[n.SideType.right]).block&&p++;r=this.getRectCenterPosition({minX:0,maxX:8,minY:t.indexY,maxY:t.indexY})}else{s.default.Instance.startItemAcion(!0,t);for(l=t;l.side[n.SideType.up];)(l=l.side[n.SideType.up]).block&&p++;for(l=t;l.side[n.SideType.down];)(l=l.side[n.SideType.down]).block&&p++;r=this.getRectCenterPosition({minX:t.indexX,maxX:t.indexX,minY:0,maxY:8})}var u=0,h=a.default.Instance.addCombo();3===p?u=i.default.config.DefaultScore:(u=i.default.config.DefaultScore,u+=i.default.config.AddScore*Math.pow(2,p-3));c.default.get("effectScore").startEffect(r.x,r.y,u,h),a.default.Instance.addScore(u*h)},t.prototype.noMatch=function(){for(var t=[],e=0;e<n.CountY;e++)for(var o=0;o<n.CountX;o++){var i=this.getCell(o,e);if(i&&i.block){if(o!==n.CountX-1){var r=i.side[n.SideType.right];if(r&&r.block&&r.block.type!==i.block.type){var a=i.block;i.block=r.block,r.block=a,(this.singleCheck(i)||this.singleCheck(r))&&(t.push(i),t.push(r)),a=i.block,i.block=r.block,r.block=a}}if(e!==n.CountY-1){var s=i.side[n.SideType.down];if(s&&s.block&&s.block.type!==i.block.type){a=i.block;i.block=s.block,s.block=a,(this.singleCheck(i)||this.singleCheck(s))&&(t.push(i),t.push(s)),a=i.block,i.block=s.block,s.block=a}}}}return!t.length},t.prototype.singleCheck=function(t){if(t&&t.block&&t.block.type!==n.BlockType.none){var e=t.block.type,o=t.side[n.SideType.left],i=t.side[n.SideType.right];if(o&&i&&o.block&&i.block&&o.block.type===e&&i.block.type===e)return!0;if(o&&o.block&&o.block.type===e){var r=o.side[n.SideType.left];if(r&&r.block&&r.block.type===e)return!0}if(i&&i.block&&i.block.type===e){var a=i.side[n.SideType.right];if(a&&a.block&&a.block.type===e)return!0}var s=t.side[n.SideType.up],c=t.side[n.SideType.down];if(s&&c&&s.block&&c.block&&s.block.type===e&&c.block.type===e)return!0;if(s&&s.block&&s.block.type===e){var p=s.side[n.SideType.up];if(p&&p.block&&p.block.type===e)return!0}if(c&&c.block&&c.block.type===e){var l=c.side[n.SideType.down];if(l&&l.block&&l.block.type===e)return!0}return!1}},t.prototype.getRectCenterPosition=function(t){var e=(t.minX+t.maxX)/2,o=(t.minY+t.maxY)/2;return{x:this.boardData.start.x+e*this.boardData.cellSize.w,y:this.boardData.start.y-o*this.boardData.cellSize.h}},t.prototype.getRectType=function(t){var e=t.maxX-t.minX,o=t.maxY-t.minY,n=e>o?e:o;return n>=4?2:n>=3?0===(e>o?o:e)?0:1:n>=2?1:void 0},t}();o.default=l,cc._RF.pop()},{"../data/const":"const","../data/store":"store","../fw/PoolManager":"PoolManager","../fw/SoundManager":"SoundManager","../fw/Util":"Util","../manager/GameManager":"GameManager","../manager/ItemActionManager":"ItemActionManager"}],store:[function(t,e,o){"use strict";cc._RF.push(e,"29396MeSlVDWIOv7rlsgMf7","store"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./config"),i=t("./const"),r=new(function(){function t(){this.config=new n.default,this.gameState=i.GameState.wait,this.time=0,this.score=0,this.combo=0,this.isPlay=!1}return t.prototype.claer=function(){this.gameState=i.GameState.wait,this.time=0,this.score=0,this.combo=0},t}());o.default=r,cc._RF.pop()},{"./config":"config","./const":"const"}],swap:[function(t,e,o){"use strict";cc._RF.push(e,"8c1248zDcRNHrMAApvp5IKV","swap"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../manager/GameManager"),i=t("../fw/Util"),r=function(){function t(){this.isPlay=!1,this.block1=null,this.block2=null,this.time=0,this.swapTime=0,this.call=null}return t.prototype.start=function(t,e,o,i){this.block1=t,this.block2=e,this.swapTime=o,this.call=i,this.isPlay=!0,this.time=0,n.default.Instance.actionCountUp()},t.prototype.finish=function(){this.isPlay=!1},t.prototype.startReset=function(){var t=this.block1;this.block1=this.block2,this.block2=t,this.isPlay=!0,this.time=0,n.default.Instance.actionCountUp()},t.prototype.update=function(t){if(this.isPlay){if(this.time+=t,this.time>=this.swapTime)return this.time=this.swapTime,this.finishSwap(),void(this.call&&this.call());var e=this.time/this.swapTime,o=this.block1.cell,n=this.block2.cell,r=i.default.Math.lerp(o.node.x,n.node.x,e),a=i.default.Math.lerp(n.node.x,o.node.x,e),s=i.default.Math.lerp(o.node.y,n.node.y,e),c=i.default.Math.lerp(n.node.y,o.node.y,e);this.block1.node.setPosition(r,s),this.block2.node.setPosition(a,c)}},t.prototype.finishSwap=function(){var t=this.block1.cell;this.block1.cell=this.block2.cell,this.block2.cell=t,this.block1.cell.setBlock(this.block1),this.block2.cell.setBlock(this.block2),this.block1.node.setPosition(this.block1.cell.node.x,this.block1.cell.node.y),this.block2.node.setPosition(this.block2.cell.node.x,this.block2.cell.node.y),this.isPlay=!1,n.default.Instance.actionCountDown()},t.prototype.claer=function(){this.isPlay=!1},t}();o.default=r,cc._RF.pop()},{"../fw/Util":"Util","../manager/GameManager":"GameManager"}]},{},["GameScene","config","const","store","EventManager","Following","IFrame","ImageFont","Init","InputManager","Pool","Pool2","PoolManager","PrefabManager","Responsive","SetWindowBlur","SoundManager","Stack","Util","Background","Block","BlockContainer","Cloud","Combo","EffectDropFish","EffectEatFish","EffectScore","EffectTime","ItemActionStraight","MainShark","Shark1","Shark2","Timer","actionCount","cell","dropCtrl","generator","match","swap","BlockManager","GameManager","ItemActionManager"]);